{% extends 'base.html' %}
{% block title %}⚙️ الإعدادات العامة - ميمو{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-10 max-w-4xl">

  <!-- 🔹 العنوان الرئيسي -->
  <div class="text-center mb-10">
    <h1 class="text-3xl font-extrabold text-blue-600 dark:text-blue-400">
      ⚙️ الإعدادات العامة
    </h1>
    <p class="text-gray-500 mt-2">تحكم كامل في ميزات وأمان موقعك</p>
  </div>

  <form method="POST" action="{{ url_for('memo_settings') }}" enctype="multipart/form-data" class="space-y-8">

    <!-- 👤 التسجيل -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">👤 التسجيل</h2>
      <div class="space-y-3">
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="enable_registration" {% if settings.enable_registration %}checked{% endif %}>
          <span>السماح بالتسجيل</span>
        </label>
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="auto_verify_users" {% if settings.auto_verify_users %}checked{% endif %}>
          <span>توثيق المستخدمين تلقائيًا</span>
        </label>
      </div>
    </div>

    <!-- 🔒 الأمان -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">🔒 الأمان</h2>
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm mb-1">عدد المحاولات قبل الحظر</label>
          <input type="number" name="max_login_attempts" class="form-input w-full rounded-lg"
                 value="{{ settings.max_login_attempts }}">
        </div>
        <div>
          <label class="block text-sm mb-1">مدة الحظر (دقائق)</label>
          <input type="number" name="ban_duration_minutes" class="form-input w-full rounded-lg"
                 value="{{ settings.ban_duration_minutes }}">
        </div>
      </div>
      <label class="flex items-center space-x-2 space-x-reverse mt-4">
        <input type="checkbox" name="enable_two_factor" {% if settings.enable_two_factor %}checked{% endif %}>
        <span>تفعيل التحقق بخطوتين</span>
      </label>
    </div>

    <!-- 📝 المحتوى -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">📝 المحتوى</h2>
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm mb-1">أقصى عدد حروف للمنشور</label>
          <input type="number" name="max_poem_length" class="form-input w-full rounded-lg"
                 value="{{ settings.max_poem_length }}">
        </div>
        <div>
          <label class="block text-sm mb-1">الفاصل بين كل نشر (ثواني)</label>
          <input type="number" name="post_interval_seconds" class="form-input w-full rounded-lg"
                 value="{{ settings.post_interval_seconds }}">
        </div>
      </div>
      <textarea name="blocked_words" rows="3" class="form-input w-full rounded-lg mt-4"
                placeholder="كلمات محظورة (افصل بفاصلة)">{{ settings.blocked_words }}</textarea>
    </div>

    <!-- ✨ الميزات الاجتماعية -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">✨ الميزات الاجتماعية</h2>
      <div class="grid sm:grid-cols-2 gap-3">
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="enable_likes" {% if settings.enable_likes %}checked{% endif %}>
          <span>تفعيل الإعجابات</span>
        </label>
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="enable_comments" {% if settings.enable_comments %}checked{% endif %}>
          <span>تفعيل التعليقات</span>
        </label>
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="enable_messages" {% if settings.enable_messages %}checked{% endif %}>
          <span>تفعيل الرسائل الخاصة</span>
        </label>
        <label class="flex items-center space-x-2 space-x-reverse">
          <input type="checkbox" name="enable_notifications" {% if settings.enable_notifications %}checked{% endif %}>
          <span>تفعيل التنبيهات</span>
        </label>
      </div>
    </div>

    <!-- 🌐 الموقع -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">🌐 الموقع</h2>
      <div class="space-y-4">
        <input type="text" name="site_name" class="form-input w-full rounded-lg"
               value="{{ settings.site_name }}" placeholder="اسم الموقع">
        <textarea name="site_description" rows="2" class="form-input w-full rounded-lg"
                  placeholder="وصف الموقع">{{ settings.site_description }}</textarea>
        <input type="file" name="site_logo" class="form-input w-full rounded-lg">
      </div>
    </div>

    <!-- 🌙 التخصيص -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">🌙 التخصيص</h2>
      <label class="flex items-center space-x-2 space-x-reverse">
        <input type="checkbox" name="dark_mode" {% if settings.dark_mode %}checked{% endif %}>
        <span>الوضع الليلي افتراضيًا</span>
      </label>
    </div>

    <!-- 📈 SEO -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">📈 SEO</h2>
      <div class="space-y-4">
        <input type="text" name="meta_title" class="form-input w-full rounded-lg"
               value="{{ settings.meta_title }}" placeholder="Meta Title">
        <textarea name="meta_description" rows="2" class="form-input w-full rounded-lg"
                  placeholder="Meta Description">{{ settings.meta_description }}</textarea>
        <input type="text" name="ga_id" class="form-input w-full rounded-lg"
               value="{{ settings.ga_id }}" placeholder="Google Analytics ID">
      </div>
    </div>

    <!-- 🛠️ الإدارة -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold mb-4">🛠️ الإدارة</h2>
      <div class="grid md:grid-cols-2 gap-4 mb-4">
        <input type="text" name="admin_panel_name" class="form-input w-full rounded-lg"
               value="{{ settings.admin_panel_name }}" placeholder="اسم لوحة الإدارة">
        <input type="email" name="contact_email" class="form-input w-full rounded-lg"
               value="{{ settings.contact_email }}" placeholder="بريد التواصل">
      </div>
    </div>

    <!-- ✅ زر الحفظ -->
    <div class="text-center">
      <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-xl shadow hover:bg-blue-700 transition">
        💾 حفظ التغييرات
      </button>
    </div>
    
  </form>
</div>
{% endblock %}