{% extends 'base.html' %}
{% block title %}{{ poem.title }}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-10 px-4">
  
  <!-- عنوان القصيدة -->
  <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">{{ poem.title }}</h1>

  <!-- اسم الكاتب -->
  <p class="text-gray-600 dark:text-gray-300 mb-8">
    ✍️ بواسطة 
    <a href="{{ url_for('profile', username=poem.author.username) }}"
       class="text-blue-500 hover:underline">
      {{ poem.author.username }}
    </a>
    • {{ poem.timestamp.strftime('%Y-%m-%d %H:%M') }}
  </p>

  <!-- عرض أبيات القصيدة -->
  <div class="space-y-6">
    {% for line in poem.lines %}
    <div id="line-{{ line.id }}" 
         class="p-4 rounded-lg shadow-sm bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700">
      <p class="text-lg text-gray-800 dark:text-gray-100">{{ line.text }}</p>

      <!-- أزرار التفاعل -->
      <div class="flex items-center space-x-4 rtl:space-x-reverse mt-3">
        <!-- زر الإعجاب -->
        <form method="POST" action="{{ url_for('like_line', line_id=line.id) }}">
          <button type="submit" 
                  class="flex items-center text-red-500 hover:text-red-600">
            ❤️ <span class="ml-1">{{ line.likes|length }}</span>
          </button>
        </form>

        <!-- زر التعليق -->
        <a href="{{ url_for('comment_on_line', line_id=line.id) }}" 
           class="flex items-center text-blue-500 hover:text-blue-600">
          💬 <span class="ml-1">{{ line.comments|length }}</span>
        </a>
      </div>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}