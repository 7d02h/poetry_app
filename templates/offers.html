{% extends "base.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ - Ù…ÙŠÙ…Ùˆ{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-10">
  <div class="bg-white dark:bg-gray-800 shadow-xl rounded-3xl p-8">
    
    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <h3 class="text-3xl font-extrabold text-center text-yellow-600 dark:text-yellow-400 mb-10 tracking-wide">
      ğŸ”¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶
    </h3>

    <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯ -->
    <a href="{{ url_for('add_offer') }}" 
       class="inline-block mb-6 px-4 py-2 bg-blue-600 text-white rounded-xl shadow hover:opacity-90">
       â• Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯
    </a>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
    <div class="grid gap-4">
      {% for offer in offers %}
      <div class="p-6 bg-gray-50 dark:bg-gray-700 rounded-2xl shadow flex flex-col md:flex-row justify-between items-start md:items-center">
        
        <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ -->
        <div class="mb-4 md:mb-0">
          <h5 class="text-lg font-bold text-gray-800 dark:text-white">
            {{ offer.title }}
          </h5>
          <p class="text-gray-600 dark:text-gray-300">{{ offer.description }}</p>

          {% if offer.discount_percent > 0 %}
          <p class="text-green-600 dark:text-green-400 font-bold">
            ğŸ’¸ Ø®ØµÙ… {{ offer.discount_percent }}%
          </p>
          {% endif %}

          <p class="text-sm text-gray-500 dark:text-gray-400">
            ğŸ“… Ù…Ù†: {{ offer.start_date.strftime('%Y-%m-%d') }} 
            â†’ Ø¥Ù„Ù‰: {{ offer.end_date.strftime('%Y-%m-%d') }}
          </p>

          {% if offer.is_valid() %}
            <span class="inline-block mt-1 px-2 py-1 text-xs bg-green-500 text-white rounded">Ù…ÙØ¹Ù„ âœ…</span>
          {% else %}
            <span class="inline-block mt-1 px-2 py-1 text-xs bg-red-500 text-white rounded">ØºÙŠØ± ÙØ¹Ø§Ù„ âŒ</span>
          {% endif %}
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="space-x-2 space-x-reverse flex">
          <!-- Ø²Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„/Ø§Ù„ØªØ¹Ø·ÙŠÙ„ -->
          <form action="{{ url_for('toggle_offer', offer_id=offer.id) }}" method="post" class="inline">
            {% if offer.is_active %}
              <button type="submit" class="px-3 py-1 bg-gray-500 text-white rounded-lg">ğŸš« ØªØ¹Ø·ÙŠÙ„</button>
            {% else %}
              <button type="submit" class="px-3 py-1 bg-green-600 text-white rounded-lg">âœ… ØªÙØ¹ÙŠÙ„</button>
            {% endif %}
          </form>

          <!-- Ø²Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
          <a href="{{ url_for('edit_offer', offer_id=offer.id) }}" 
             class="px-3 py-1 bg-yellow-500 text-white rounded-lg">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
          
          <!-- Ø²Ø± Ø§Ù„Ø­Ø°Ù -->
          <form action="{{ url_for('delete_offer', offer_id=offer.id) }}" method="post" class="inline"
                onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ØŸ')">
            <button type="submit" class="px-3 py-1 bg-red-600 text-white rounded-lg">ğŸ—‘ Ø­Ø°Ù</button>
          </form>
        </div>
      </div>
      {% else %}
      <p class="text-gray-500 dark:text-gray-400">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ø­Ø§Ù„ÙŠØ§Ù‹</p>
      {% endfor %}
    </div>

  </div>
</div>
{% endblock %}