{% extends 'base.html' %}  
{% block title %}ุงูุฅุดุนุงุฑุงุช{% endblock %}  

{% block content %}  
<div class="max-w-xl mx-auto py-8 px-4">  
  <!-- ุงูุนููุงู -->
  <h2 class="text-xl font-bold text-center mb-6 text-gray-800 dark:text-white">๐ ุงูุฅุดุนุงุฑุงุช</h2>  

  <!-- โ DEBUG: ุนุฑุถ ุงุณู ุงููุณุชุฎุฏู ุงูุญุงูู -->
  <p class="text-xs text-center text-gray-500 mb-3">ุงููุณุชุฎุฏู ุงูุญุงูู: {{ current_user.username }}</p>

  {% if notifications %}  
    <div class="space-y-3">  
      {% for n in notifications %}  
        <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm overflow-hidden transition hover:shadow-md {% if not n.is_read %}ring-2 ring-blue-400{% endif %}">  
            
          <!-- ุฑุงุจุท ุงูุชูุฌูู -->  
          <a href="{{ n.link }}"  
             class="flex items-center gap-3 no-underline hover:bg-gray-50 dark:hover:bg-gray-800 p-3 transition">  

            <!-- ุตูุฑุฉ ุงููุฑุณู -->
            <img src="{{ url_for('static', filename='profile_pics/' + (n.sender_image or 'default.jpg')) }}"  
                 alt="ุตูุฑุฉ"  
                 class="w-10 h-10 rounded-full object-cover border border-gray-300 dark:border-gray-600 shadow-sm">  

            <!-- ูุญุชูู ุงูุฅุดุนุงุฑ -->  
            <div class="flex-1 min-w-0">  
              <p class="text-sm text-gray-800 dark:text-gray-100 truncate flex items-center gap-2">
                
                <!-- SVG ุญุณุจ ููุน ุงูุฅุดุนุงุฑ -->
                {% if n.type == 'like' %}
                  <!-- ููุจ (ูุงูู ุจูุช ุดุนุฑู) -->
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="text-red-500 shrink-0">
                    <path d="M12 21s-6.716-4.508-9.428-7.22A6.5 6.5 0 1 1 12 5.08a6.5 6.5 0 1 1 9.428 8.7C18.716 16.492 12 21 12 21z"/>
                  </svg>
                {% elif n.type == 'like_story' %}
                  <!-- ููุจ ูุน ููุนุฉ (ูุงูู ูุตุฉ) -->
                  <svg width="16" height="16" viewBox="0 0 24 24" class="shrink-0">
                    <g fill="none" stroke="currentColor" stroke-width="1.5" class="text-pink-500">
                      <path d="M12 21s-6.716-4.508-9.428-7.22A6.5 6.5 0 0 1 12 5.08a6.5 6.5 0 0 1 9.428 8.7C18.716 16.492 12 21 12 21Z"/>
                      <path d="M18.5 4.5 19 3l1.5-.5L19 2l-.5-1.5L18 2l-1.5.5L18 3l.5 1.5Z"/>
                    </g>
                  </svg>
                {% elif n.type == 'follow' %}
                  <!-- ูุชุงุจุนุฉ -->
                  <svg width="16" height="16" viewBox="0 0 24 24" class="text-blue-500 shrink-0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M17 8h5M19.5 5.5v5"/>
                  </svg>
                {% elif n.type == 'comment' %}
                  <!-- ุชุนููู -->
                  <svg width="16" height="16" viewBox="0 0 24 24" class="text-green-600 shrink-0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15a4 4 0 0 1-4 4H8l-5 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/>
                  </svg>
                {% elif n.type == 'follow_request' %}
                  <!-- ุทูุจ ูุชุงุจุนุฉ -->
                  <svg width="16" height="16" viewBox="0 0 24 24" class="text-yellow-500 shrink-0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M18 8h3M19.5 9.5v-3"/>
                  </svg>
                {% else %}
                  <!-- ุฅุฌุฑุงุก ุนุงู -->
                  <svg width="16" height="16" viewBox="0 0 24 24" class="text-gray-400 shrink-0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h9"/>
                    <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"/>
                  </svg>
                {% endif %}

                <span class="truncate">
                  <strong>{{ n.sender }}</strong>
                  {% if n.type == 'like' %}  
                    <span class="text-red-500">ุฃุนุฌุจ</span> ุจุจูุชู ุงูุดุนุฑู  
                  {% elif n.type == 'like_story' %}  
                    <span class="text-pink-500">ุฃุนุฌุจ</span> ุจูุตุชู โค๏ธ
                  {% elif n.type == 'follow' %}  
                    <span class="text-blue-500">ุจุฏุฃ</span> ุจูุชุงุจุนุชู  
                  {% elif n.type == 'comment' %}  
                    <span class="text-green-500">ุนูู</span> ุนูู ุฃุญุฏ ุฃุจูุงุชู  
                  {% elif n.type == 'follow_request' %}  
                    <span class="text-yellow-500">ุทูุจ</span> ูุชุงุจุนุชู  
                  {% else %}  
                    ูุงู ุจุฅุฌุฑุงุก ุฌุฏูุฏ  
                  {% endif %}
                </span>
              </p>  
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">{{ n.time_ago }}</p>  

              <!-- โ DEBUG: ุนุฑุถ recipient ุงูุญูููู ููุฅุดุนุงุฑ -->
              <p class="text-[10px] text-gray-400">๐ฉ ุงููุฑุณู ุฅููู: {{ n.recipient }}</p>
            </div>  
          </a>  

          <!-- ุฃุฒุฑุงุฑ ูุจูู/ุฑูุถ ุทูุจ ุงููุชุงุจุนุฉ -->  
          {% if n.type == 'follow_request' %}  
            <form method="POST" action="{{ url_for('handle_follow_request') }}" class="flex justify-end gap-2 px-3 pb-3">  
              <input type="hidden" name="notif_id" value="{{ n.id }}">  
              <button name="action" value="accept"  
                      class="px-3 py-1 text-xs font-medium bg-green-500 text-white rounded-full hover:bg-green-600 transition">  
                โ ูุจูู  
              </button>  
              <button name="action" value="reject"  
                      class="px-3 py-1 text-xs font-medium bg-red-500 text-white rounded-full hover:bg-red-600 transition">  
                โ ุฑูุถ  
              </button>  
            </form>  
          {% endif %}  
        </div>  
      {% endfor %}  
    </div>  
  {% else %}  
    <div class="mt-6 text-center text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 p-5 rounded-2xl shadow-sm text-sm">  
      ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุญุงูููุง.  
    </div>  
  {% endif %}  
</div>  
{% endblock %}