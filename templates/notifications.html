{% extends 'base.html' %}
{% block title %}ุงูุฅุดุนุงุฑุงุช{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="text-center mb-4">๐ ุงูุฅุดุนุงุฑุงุช</h2>

  {% if notifications %}
    <div class="list-group">
      {% for n in notifications %}
        <div class="list-group-item d-flex flex-column gap-2 {% if not n.is_read %}bg-light{% endif %}">
          <a href="{{ url_for('go_to_notification', notif_id=n.id) }}" class="d-flex align-items-center gap-3 text-decoration-none text-dark">
            <!-- ุตูุฑุฉ ุงููุฑุณู -->
            <img src="{{ url_for('static', filename='profile_pics/' + (n.sender_image or 'default.jpg')) }}" 
                 class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover;" alt="ุตูุฑุฉ">

            <!-- ุชูุงุตูู ุงูุฅุดุนุงุฑ -->
            <div class="flex-grow-1">
              <div>
                <strong>{{ n.sender }}</strong>
                {% if n.type == 'like' %}
                  <span class="text-danger">ุฃุนุฌุจ</span> ุจุจูุชู ุงูุดุนุฑู
                {% elif n.type == 'follow' %}
                  <span class="text-primary">ุจุฏุฃ</span> ุจูุชุงุจุนุชู
                {% elif n.type == 'comment' %}
                  <span class="text-success">ุนูู</span> ุนูู ุฃุญุฏ ุฃุจูุงุชู
                {% elif n.type == 'follow_request' %}
                  <span class="text-warning">ุทูุจ</span> ูุชุงุจุนุชู
                {% else %}
                  ูุงู ุจุฅุฌุฑุงุก ุฌุฏูุฏ
                {% endif %}
              </div>
              <small class="text-muted">{{ n.time_ago }}</small>
            </div>
          </a>

          {% if n.type == 'follow_request' %}
            <!-- ุฃุฒุฑุงุฑ ูุจูู ุฃู ุฑูุถ ุทูุจ ุงููุชุงุจุนุฉ -->
            <form method="POST" action="{{ url_for('handle_follow_request') }}" class="mt-2 text-end">
              <input type="hidden" name="sender_username" value="{{ n.sender }}">
              <button name="action" value="accept" class="btn btn-sm btn-success rounded-pill px-3">โ ูุจูู</button>
              <button name="action" value="reject" class="btn btn-sm btn-danger rounded-pill px-3">โ ุฑูุถ</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info text-center mt-4">
      ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุญุงูููุง.
    </div>
  {% endif %}
</div>
{% endblock %}