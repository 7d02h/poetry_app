{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto mt-10 p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700">
  <h2 class="text-3xl font-extrabold mb-8 text-center text-gray-800 dark:text-gray-100">📦 أرشيفي</h2>

  <!-- 📜 قسم الأبيات -->
  <h3 class="text-xl font-semibold mb-4 text-blue-600 dark:text-blue-400">📜 الأبيات</h3>
  {% if poems %}
    <div class="space-y-6">
      {% for poem in poems %}
        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition overflow-hidden">
          <div class="p-5">
            <p class="text-gray-700 dark:text-gray-200 text-lg leading-relaxed">{{ poem.content }}</p>
          </div>
          <div class="flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700">
            <form method="POST" action="{{ url_for('restore_poem', poem_id=poem.id) }}">
              <button type="submit" class="px-4 py-2 rounded-lg text-sm font-medium bg-green-500 text-white hover:bg-green-600 transition">
                ♻️ استرجاع
              </button>
            </form>
            <form method="POST" action="{{ url_for('delete_poem', poem_id=poem.id) }}">
              <button type="submit" class="px-4 py-2 rounded-lg text-sm font-medium bg-red-500 text-white hover:bg-red-600 transition">
                🗑️ حذف
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-500 dark:text-gray-400 italic">لا توجد أبيات مؤرشفة.</p>
  {% endif %}

  <!-- 📖 قسم الستوريات -->
  <h3 class="text-xl font-semibold mb-4 mt-10 text-purple-600 dark:text-purple-400">📖 الستوريات</h3>
  {% if stories %}
    <div class="space-y-6">
      {% for story in stories %}
        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition overflow-hidden">
          <!-- محتوى الستوريات -->
          {% if story.media_type == 'image' %}
            <img src="{{ story.media_url }}" alt="Story Image" class="w-full h-64 object-cover">
          {% elif story.media_type == 'video' %}
            <video controls class="w-full rounded-t-xl">
              <source src="{{ story.media_url }}" type="video/mp4">
              متصفحك لا يدعم تشغيل الفيديو.
            </video>
          {% endif %}

          <div class="p-5">
            <p class="text-gray-700 dark:text-gray-200">{{ story.content }}</p>
          </div>
          <div class="flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700">
            <form method="POST" action="{{ url_for('restore_story', story_id=story.id) }}">
              <button type="submit" class="px-4 py-2 rounded-lg text-sm font-medium bg-green-500 text-white hover:bg-green-600 transition">
                ♻️ استرجاع
              </button>
            </form>
            <form method="POST" action="{{ url_for('delete_story', story_id=story.id) }}">
              <button type="submit" class="px-4 py-2 rounded-lg text-sm font-medium bg-red-500 text-white hover:bg-red-600 transition">
                🗑️ حذف
              </button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-500 dark:text-gray-400 italic">لا توجد ستوريات مؤرشفة.</p>
  {% endif %}
</div>
{% endblock %}